"use strict";(self["webpackChunkvideoproject"]=self["webpackChunkvideoproject"]||[]).push([[431],{7431:function(e,t,i){i.r(t),i.d(t,{default:function(){return g}});var s=function(){var e=this,t=e._self._c;return t("div",{staticStyle:{background:"#f5f7f9","margin-top":"-67px"}},[t("div",{attrs:{id:"buyershow"}},[t("el-backtop",{attrs:{target:"#buyershow"}},[t("i",{staticClass:"iconfont icon-fhdb1",staticStyle:{color:"#999"}})]),t("div",{staticClass:"topclon"},[t("i",{staticClass:"iconfont icon-icfullscreenexit",on:{click:e.outcheckFull}}),t("i",{staticClass:"el-icon-close",on:{click:e.closeCheckFull}})]),t("div",{staticClass:"banxin"},[e.isloading?t("div",{staticClass:"loading"}):e._e(),t("div",{staticClass:"searchfor"},[t("div",{staticClass:"module"},[t("ul",[t("li",{class:{Selectedscreen:0==e.screenIndex},on:{click:function(t){e.screenIndex=0}}},[e._v("综合")]),t("li",{class:{Selectedscreen:1==e.screenIndex},on:{click:function(t){e.screenIndex=1}}},[e._v("红人")]),t("li",{class:{Selectedscreen:3==e.screenIndex},on:{click:function(t){e.screenIndex=3}}},[e._v("案例")])]),t("div",{staticClass:"segmentation"})]),t("el-input",{staticClass:"inp",attrs:{placeholder:e.searchhint},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getRenderingData.apply(null,arguments)}},model:{value:e.searchforval,callback:function(t){e.searchforval=t},expression:"searchforval"}}),t("el-button",{staticClass:"searchforbtn",on:{click:e.getRenderingData}},[e._v("搜索")])],1),t("div",{staticClass:"screen"},[t("div",{staticClass:"filter_header"},[t("div",{staticClass:"filter_item"},[t("span",[e._v("达人性别")]),t("el-radio-group",{on:{change:function(t){return e.handlerSearchList("genderdata",e.genderValue)}},model:{value:e.genderValue,callback:function(t){e.genderValue=t},expression:"genderValue"}},[t("el-radio-button",{attrs:{label:""}},[e._v("全部")]),t("el-radio-button",{attrs:{label:"male"}},[e._v("男性")]),t("el-radio-button",{attrs:{label:"female"}},[e._v("女性")])],1)],1),t("div",{staticClass:"filter_item"},[t("span",[e._v("产品品类")]),t("el-radio-group",{on:{change:function(t){return e.handlerSearchList("category_id",e.categoryValue)}},model:{value:e.categoryValue,callback:function(t){e.categoryValue=t},expression:"categoryValue"}},[t("el-radio-button",{attrs:{label:""}},[e._v("全部")]),e._l(e.categoryList,(function(i,s){return t("el-radio-button",{key:s,attrs:{label:i.id}},[e._v(e._s(i.name))])}))],2)],1),t("div",{staticStyle:{height:"1px","background-color":"#eee"}}),t("div",{staticClass:"filter_item",staticStyle:{"margin-top":"10px"}},[t("span",[e._v("主题专区")]),t("el-radio-group",{on:{change:function(t){return e.handlerSearchList("theme_id",e.themeValue)}},model:{value:e.themeValue,callback:function(t){e.themeValue=t},expression:"themeValue"}},[t("el-radio-button",{attrs:{label:""}},[e._v(" 全部 ")]),e._l(e.themeList,(function(i,s){return t("el-radio-button",{key:s,attrs:{label:i.id}},[t("div",[e._v(" "+e._s(i.name)+" ")])])}))],2)],1)])]),t("div",{staticClass:"seek"},[t("div",{staticClass:"seek_div"},[t("div",{staticClass:"seek_div_left"},[t("div",{staticClass:"seek_div_span"},[e._v("找到 "+e._s(e.total)+" 个")])]),t("div",{staticClass:"seek_div_rigth"},[t("div",{staticClass:"seek_sort",on:{click:function(t){return e.SwitchSorting("number")}}},[t("span",[e._v("编号")]),t("div",{staticClass:"seek_icon"},[t("i",{staticClass:"el-icon-caret-top",class:{Selected:1==e.SelectedNumber}}),t("i",{staticClass:"el-icon-caret-bottom",class:{Selected:2==e.SelectedNumber}})])]),t("div",{staticClass:"seek_sort",on:{click:function(t){return e.SwitchSorting("price")}}},[t("span",[e._v("价格")]),t("div",{staticClass:"seek_icon"},[t("i",{staticClass:"el-icon-caret-top",class:{Selected:1==e.SelectedPrice}}),t("i",{staticClass:"el-icon-caret-bottom",class:{Selected:2==e.SelectedPrice}})])]),t("div",{staticClass:"seek_divd"},[t("span",[e._v("价格 ≤")]),t("el-input",{staticClass:"priceinp",on:{change:e.getRenderingData},model:{value:e.priceval,callback:function(t){e.priceval=t},expression:"priceval"}}),t("span",[e._v("元")])],1)])])]),t("div",{staticClass:"product"},[0!=e.datalist.length?t("ul",{staticClass:"product_ul"},e._l(e.datalist,(function(i,s){return t("li",{key:i.user_id,staticClass:"product_li"},[t("div",{staticClass:"product_li_img",on:{click:function(t){return e.gohomepage(i.id,i.user_id)}}},[t("img",{attrs:{src:i.image}})]),t("div",{staticClass:"product_list"},[t("div",{staticClass:"product_list_div1"},[t("div",{staticClass:"product_list_left"},[t("div",{staticClass:"product_list_no"},[e._v("No."+e._s(i.user_id))]),"影响力者"==i.type?t("div",{staticClass:"product_list_typelv"},[e._v(" "+e._s(i.type)+" ")]):e._e(),"社媒红人"==i.type?t("div",{staticClass:"product_list_typeho"},[e._v(" "+e._s(i.type)+" ")]):e._e(),"数字人"==i.type?t("div",{staticClass:"product_list_typelan"},[e._v(" "+e._s(i.type)+" ")]):e._e(),"素人"==i.type?t("div",{staticClass:"product_list_typechen"},[e._v(" "+e._s(i.type)+" ")]):e._e()]),0==i.price_type?t("div",{staticClass:"product_list_rigth"},[e._v(" ￥"+e._s(i.price)+" ")]):1==i.price_type?t("div",{staticClass:"product_list_rigth"},[e._v(" ￥"),t("span",[e._v(e._s(i.lower_price)+"-"+e._s(i.highest_price))])]):t("div",{staticClass:"product_list_rigth",staticStyle:{"font-size":"11px"}},[e._v(" 视产品而定 ")])]),i.category_ids.length<=5?t("div",{staticClass:"product_list_div2",attrs:{title:e.categoryidarr[s]}},e._l(i.category_ids,(function(i,s){return t("li",{key:s},[e._v(" "+e._s(i.name)+" ")])})),0):t("div",{staticStyle:{display:"flex"},attrs:{title:e.categoryidarr[s]}},[t("div",{staticClass:"product_list_div2"},e._l(i.category_ids,(function(i,s){return t("li",{key:s},[e._v(" "+e._s(i.name)+" ")])})),0),t("span",[e._v("...")])]),t("div",{staticStyle:{height:"1px","background-color":"#eee","margin-top":"15px"}}),t("ul",{staticClass:"product_list_videos"},[e._l(e.isvideoslist[s],(function(s,a){return t("li",{key:s.user_id,attrs:{title:s.desc},on:{click:function(t){return e.openVideos(i.videos,a)}}},[t("i",{staticClass:"iconfont icon-video",staticStyle:{"font-size":"14px"}}),t("span",[e._v(" "+e._s(s.desc))])])})),i.videos.length>=12?t("li",{staticStyle:{width:"22px","text-align":"center",display:"block",background:"linear-gradient(","border-radius":"4px"},on:{click:function(t){return e.gohomepage(i.id,i.user_id)}}},[e._v(" . . . ")]):e._e()],2)]),t("div",{ref:"addbtndom",refInFor:!0,class:{product_btn:0!=i.istrue,addlistbj:0==i.istrue},on:{click:function(t){return e.addlist(i,s,i.istrue)}}},[t("span",{staticClass:"icon"},[e._v("+")]),t("i",{staticClass:"iconfont icon-gwc",staticStyle:{"font-size":"14px"}}),0==i.istrue?t("span",{staticClass:"test1"},[e._v("已选择")]):t("span",{staticClass:"test1"},[e._v("选择")])]),0!=i.logo_id.length?t("div",{staticClass:"logo_id"},[e._m(0,!0)]):e._e()])})),0):t("div",{staticClass:"product_div"},[t("img",{attrs:{src:i(9166),alt:""}}),t("p",[e._v("暂无搜索结果")])])])]),[t("div",{directives:[{name:"show",rawName:"v-show",value:0!=e.datalist.length,expression:"datalist.length != 0"}],staticClass:"paging"},[0!=e.total?t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[12,24,48,96],"page-size":e.per_page,layout:"total, prev, pager, next, sizes, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}):e._e()],1)],t("el-dialog",{attrs:{visible:e.dialogVisible,width:"880px","close-on-click-modal":!1,"append-to-body":!0,"custom-class":"my-dialog"},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"eldialogVisble"},[t("div",{staticStyle:{width:"650px"}},[t("div",{staticClass:"leftVis"},[t("video",{ref:"myVideo",attrs:{autoplay:"",controls:"",preload:"none"},on:{play:function(t){e.video_img=!0},pause:function(t){e.video_img=!1}}},[t("source",{attrs:{src:e.videoslist[e.videoslistindex]?.file,type:"video/mp4"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.video_img,expression:"!video_img"}],staticClass:"video_img",on:{click:e.videoplay}})]),t("div",{staticClass:"title",attrs:{title:e.videoslist[e.videoslistindex]?.desc}},[e._v(" "+e._s(e.videoslist[e.videoslistindex]?.desc)+" ")])]),t("div",{staticClass:"rigthlist"},[t("p",{staticClass:"rigthlist_p"},[e._v("作品案例")]),e._l(e.videoslist,(function(i,s){return t("p",{key:i.id,class:{videoslistcss:i.videoslistcss,falg:!0},attrs:{title:i.desc},on:{click:function(t){return e.SwitchVideo(e.videoslist,s)}}},[t("i",{staticClass:"iconfont icon-video"}),e._v(" "+e._s(i.desc)+" ")])}))],2)])])],2)])},a=[function(){var e=this,t=e._self._c;return t("p",[t("i",{staticClass:"iconfont icon-bq"}),t("span",[e._v("含版权")])])}],l=(i(7658),i(586)),c=i(5132),n=i(1316),r=i(8739),o={data(){return{searchforval:"",genderValue:"",categoryValue:"",themeValue:"",categoryList:[],themeList:[],total:0,per_page:0,priceval:"",datalist:[],currentPage:1,pageSize:24,dialogVisible:!1,video_img:!0,videoslist:[],videoslistindex:0,prevIndexArr:[],indexArr:[],categoryidarr:[],isvideoslist:[],isloading:!1,screenIndex:0,SelectedNumber:0,SelectedPrice:0,searchhint:"请输入产品名称/品类/红人编号请输入产品名称/品类/红人编号/红人类型/社媒名称等信息"}},mounted(){this.currentPage=n.Z.state.Index.currentPage,this.genderValue=n.Z.state.Index.dataobj.genderValue,this.categoryValue=n.Z.state.Index.dataobj.categoryValue,this.themeValue=n.Z.state.Index.dataobj.themeValue,this.searchforval=n.Z.state.Index.dataobj.searchforval,this.priceval=n.Z.state.Index.dataobj.priceval,this.isloading=!0,this.handlerGetCategory("influencer"),this.handlerGetCategory("theme_area"),this.RenderingData()},created(){const e=this;window.onresize=function(){if(e.checkFull())console.log("全屏");else{n.Z.commit("Index/setExitFullScreen",!0);let e=new URL(window.location.href).search;e?c.Z.push("Invitationfilling"+e):c.Z.push("/Requirement"),console.log("退出全屏")}}},computed:{influencersList(){return n.Z.state.Index.influencersList},influencersListid(){return n.Z.state.Index.influencersListid}},methods:{closeCheckFull(){this.outcheckFull(),n.Z.commit("Index/setExitFullScreen",!1),n.Z.commit("Index/setcurrentPage",1),n.Z.commit("Index/setdataobj",{genderValue:"",categoryValue:"",themeValue:"",searchforval:"",priceval:""}),this.currentPage=1;let e=new URL(window.location.href).search;e?c.Z.push("Invitationfilling"+e):c.Z.push("/Requirement")},outcheckFull(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},checkFull(){var e=document.mozFullScreen||document.fullScreen||document.webkitIsFullScreen||document.webkitRequestFullScreen||document.mozRequestFullScreen||document.msFullscreenEnabled;return void 0===e&&(e=!1),e},SwitchSorting(e){switch(this.isloading=!0,this.currentPage=1,e){case"number":this.SelectedNumber++,this.SelectedNumber>2&&(this.SelectedNumber=0);break;case"price":this.SelectedPrice++,this.SelectedPrice>2&&(this.SelectedPrice=0);break;default:break}this.RenderingData()},handlerGetCategory(e){(0,l.n3)({type:e}).then((t=>{if(1===t.code)switch(e){case"influencer":this.categoryList=t.data;break;case"theme_area":this.themeList=t.data;default:break}})).catch((e=>{this.$message.error(e.msg)}))},handlerSearchList(e,t){switch(this.currentPage=1,this.isloading=!0,e){case"genderdata":this.genderValue=t;break;case"category_id":this.categoryValue=t;break;case"theme_id":this.themeValue=t;break;default:break}let i={genderValue:this.genderValue,categoryValue:this.categoryValue,themeValue:this.themeValue};n.Z.commit("Index/setdataobj",i),this.RenderingData()},getRenderingData(){this.isloading=!0,this.currentPage=1,this.RenderingData()},RenderingData:(0,r.Ds)((function(){this.datalist=[],this.isvideoslist=[],this.categoryidarr=[],0==this.screenIndex&&(this.screenIndex="");let e=[this.SelectedNumber,this.SelectedPrice];0!==e[0]?e[0]="user_id":e[0]="",0!==e[1]?e[1]="price":e[1]="";let t=[this.SelectedNumber,this.SelectedPrice];for(let i=0;i<t.length;i++)0==t[i]&&(t[i]=""),1==t[i]&&(t[i]="asc"),2==t[i]&&(t[i]="desc");this.getdata(this.currentPage,this.pageSize,this.genderValue,this.categoryValue,this.themeValue,this.priceval,this.searchforval,this.screenIndex,e,t)}),500),getdata(e,t,i,s,a,c,n,r,o,d){let u={keyword:n,genderdata:i,type:[],price:c,category_id:s,page:e,pageSize:t,order:o,orderType:d,theme_id:a,keyword_type:r};(0,l.eO)(u).then((e=>{if(this.isloading=!1,1==e.code){this.total=e.data.total,this.per_page=e.data.per_page,this.datalist=e.data.data,this.currentPage=e.data.current_page;let t=[];this.datalist.forEach((e=>{if(t.push(e.category_ids),e.videos.length>=12){let t=e.videos.slice(0,10);this.isvideoslist.push(t)}else this.isvideoslist.push(e.videos)})),t.forEach((e=>{let t=e.map((e=>e.name)),i=t.join(" | ");this.categoryidarr.push(i)})),this.InvertList()}})).catch((e=>{this.$message.error(e.msg)}))},openVideos(e,t){this.dialogVisible=!0,this.videoslistindex=t,e.forEach((e=>e.videoslistcss=!1)),this.videoslist=e,this.videoslist[t].videoslistcss=!0,this.$nextTick((()=>{const e=this.$refs.myVideo;e.pause(),e.load(),e.play()}))},SwitchVideo(e,t){const i=this.$refs.myVideo;i.pause(),i.load(),i.play(),this.videoslistindex=t,e.forEach((e=>e.videoslistcss=!1)),this.videoslist=e,this.videoslist[t].videoslistcss=!0},async addlist(e,t,i){if(0!=i)if(5!=this.influencersList.length){if(this.$refs.addbtndom[t].classList.add("addlistbj"),this.$refs.addbtndom[t].classList.remove("product_btn"),this.$refs.addbtndom[t].querySelector(".test1").textContent="已选择",0!=e.istrue&&this.influencersList.length<5){this.influencersList.push(e),this.$emit("getlist",!0);const t=this.$createElement;this.$message({message:t("p",{style:"display: flex"},[t("div",{style:"width: 13px;height: 13px;background: #fff;border-radius: 50%;margin-top: 1px;position: relative;"},[t("i",{class:"iconfont icon-cg",style:""},"")]),t("span",{style:"font-size: 12px;color: #FFFFFF;margin:0 0 0 8px"},"添加成功")]),iconClass:"iconfont",offset:140,customClass:"customClasssuccess"})}this.datalist[t].istrue=!1}else{const e=this.$createElement;this.$message({message:e("p",{style:"display: flex"},[e("div",{style:"width: 18px;height: 18px;background: #EDBB32;border-radius: 50%;text-align: center;line-height: 12px;color: white;"},"¡"),e("span",{style:"font-size: 12px;color: #FFFFFF;margin:0 0 0 6px"},"该需求最多可添加5个意向红人")]),iconClass:"iconfont",offset:140,customClass:"customClasssuccess"})}},InvertList(){let e=this;e.influencersList.flat().forEach((t=>{let i=e.datalist.findIndex((e=>e.user_id==t.user_id));-1!=i&&(e.datalist[i].istrue=!1)}))},gohomepage(e,t){window.open(window.location.origin+`/homepage?id=${e}&user-id=${t}`)},handleSizeChange(e){this.isloading=!0,this.pageSize=e,this.RenderingData()},handleCurrentChange(e){this.isloading=!0,this.currentPage=e,n.Z.commit("Index/setcurrentPage",e),this.RenderingData()},videoplay(){const e=this.$refs.myVideo;e.play(),this.video_img=!0}},watch:{dialogVisible(e){if(0==e){const e=this.$refs.myVideo;e.pause(),e.load(),this.videoslistindex=-1}},screenIndex(e){switch(e){case 0:this.searchhint="请输入产品名称/品类/红人编号/红人类型/社媒名称等信息";break;case 1:this.searchhint="请输入红人编号";break;case 3:this.searchhint="请输入产品名称";break;default:break}""!=this.searchforval&&this.getRenderingData()}},async beforeDestroy(){let e="/Requirement"==this.$route.path?"user_id":"id",t=this.influencersList.flat().map((t=>t[e])).join(",");if(""!=t&&0==n.Z.state.Index.ExitFullScreen)if("/Requirement"==this.$route.path)await(0,l.z$)({id:this.influencersListid,influencer_ids:t}).then((e=>{1==e.code&&this.$emit("getlist",!0)}));else{let e=new URL(window.location.href),i=e.searchParams.get("needs");await(0,l.gx)({id:this.influencersListid,influencer_ids:t,url_mark:i,auth:localStorage.getItem("said")}).then((e=>{1==e.code&&this.$emit("getlist",!0)}))}}},d=o,u=i(1001),h=(0,u.Z)(d,s,a,!1,null,"2ec62940",null),g=h.exports}}]);