"use strict";(self["webpackChunkvideoproject"]=self["webpackChunkvideoproject"]||[]).push([[933],{4933:function(e,t,i){i.r(t),i.d(t,{default:function(){return h}});var s=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"buyershow"}},[t("div",{staticClass:"banxin"},[t("div",{staticClass:"searchfor"},[t("el-input",{staticClass:"inp",attrs:{placeholder:"输入产品名称/品类/红人编号"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.RenderingData.apply(null,arguments)}},model:{value:e.searchforval,callback:function(t){e.searchforval=t},expression:"searchforval"}}),t("el-button",{staticClass:"searchforbtn",on:{click:e.RenderingData}},[e._v("搜索")])],1),t("div",{staticClass:"screen"},[t("div",{staticClass:"filter_header"},[t("div",{staticClass:"filter_item"},[t("span",[e._v("达人性别")]),t("el-radio-group",{on:{change:function(t){return e.handlerSearchList("genderdata",e.genderValue)}},model:{value:e.genderValue,callback:function(t){e.genderValue=t},expression:"genderValue"}},[t("el-radio-button",{attrs:{label:""}},[e._v("全部")]),t("el-radio-button",{attrs:{label:"male"}},[e._v("男性")]),t("el-radio-button",{attrs:{label:"female"}},[e._v("女性")])],1)],1),t("div",{staticClass:"filter_item",staticStyle:{"margin-top":"10px"}},[t("span",[e._v("产品品类")]),t("el-radio-group",{on:{change:function(t){return e.handlerSearchList("category_id",e.categoryValue)}},model:{value:e.categoryValue,callback:function(t){e.categoryValue=t},expression:"categoryValue"}},[t("el-radio-button",{attrs:{label:""}},[e._v("全部")]),e._l(e.categoryList,(function(i,s){return t("el-radio-button",{key:s,attrs:{label:i.id}},[e._v(e._s(i.name))])}))],2)],1),t("div",{staticStyle:{height:"1px","background-color":"#eee"}}),t("div",{staticClass:"filter_item",staticStyle:{"margin-top":"10px"}},[t("span",[e._v("主题专区")]),t("el-radio-group",{on:{change:function(t){return e.handlerSearchList("theme_id",e.themeValue)}},model:{value:e.themeValue,callback:function(t){e.themeValue=t},expression:"themeValue"}},[t("el-radio-button",{attrs:{label:""}},[e._v(" 全部 ")]),e._l(e.themeList,(function(s,a){return t("el-radio-button",{key:a,attrs:{label:s.id}},[t("div",{staticStyle:{display:"flex","align-items":"center"}},[t("img",{staticStyle:{margin:"0 3px 3px 0"},attrs:{src:i(6741)}}),e._v(" "+e._s(s.name)+" ")])])}))],2)],1)])]),t("div",{staticClass:"seek"},[t("div",{staticClass:"seek_div"},[t("div",{staticClass:"seek_div_span"},[e._v("找到 "+e._s(e.total)+" 个")]),t("div",{staticClass:"seek_divd"},[t("span",[e._v("价格 ≤")]),t("el-input",{staticClass:"priceinp",on:{change:e.RenderingData},model:{value:e.priceval,callback:function(t){e.priceval=t},expression:"priceval"}}),t("span",[e._v("元")])],1)])]),t("div",{staticClass:"product"},[t("ul",{staticClass:"product_ul"},e._l(e.datalist,(function(i,s){return t("li",{key:i.user_id,staticClass:"product_li"},[t("div",{staticClass:"product_li_img",on:{click:function(t){return e.gohomepage(i.user_id)}}},[t("img",{attrs:{src:i.image}})]),t("div",{staticClass:"product_list"},[t("div",{staticClass:"product_list_div1"},[t("div",{staticClass:"product_list_left"},[t("div",{staticClass:"product_list_no"},[e._v("NO."+e._s(i.user_id))]),"影响力者"==i.type?t("div",{staticClass:"product_list_typelv"},[e._v(" "+e._s(i.type)+" ")]):e._e(),"社媒红人"==i.type?t("div",{staticClass:"product_list_typeho"},[e._v(" "+e._s(i.type)+" ")]):e._e(),"数字人"==i.type?t("div",{staticClass:"product_list_typelan"},[e._v(" "+e._s(i.type)+" ")]):e._e()]),0==i.price_type?t("div",{staticClass:"product_list_rigth"},[e._v(" ￥"+e._s(i.price)+" ")]):1==i.price_type?t("div",{staticClass:"product_list_rigth"},[e._v(" ￥"),t("span",[e._v(e._s(i.lower_price)+"-"+e._s(i.highest_price))])]):t("div",{staticClass:"product_list_rigth",staticStyle:{"font-size":"11px"}},[e._v(" 视产品而定 ")])]),i.category_ids.length<=5?t("div",{staticClass:"product_list_div2",attrs:{title:e.categoryidarr[s]}},e._l(i.category_ids,(function(i,s){return t("li",{key:s},[e._v(" "+e._s(i.name)+" ")])})),0):t("div",{staticStyle:{display:"flex"},attrs:{title:e.categoryidarr[s]}},[t("div",{staticClass:"product_list_div2"},e._l(i.category_ids,(function(i,s){return t("li",{key:s},[e._v(" "+e._s(i.name)+" ")])})),0),t("span",[e._v("...")])]),t("div",{staticStyle:{height:"1px","background-color":"#eee","margin-top":"15px"}}),t("ul",{staticClass:"product_list_videos"},[e._l(e.isvideoslist[s],(function(s,a){return t("li",{key:s.user_id,on:{click:function(t){return e.openVideos(i.videos,a)}}},[t("i",{staticClass:"el-icon-video-play",staticStyle:{"font-size":"14px"}}),t("span",[e._v(" "+e._s(s.desc))])])})),i.videos.length>=12?t("li",{staticStyle:{width:"22px","text-align":"center",display:"block",background:"linear-gradient(","border-radius":"4px"},on:{click:function(t){return e.openVideos(i.videos,0)}}},[e._v(" . . . ")]):e._e()],2)]),t("div",{ref:"addbtndom",refInFor:!0,class:{product_btn:!0},on:{click:function(t){return e.addlist(i,s,i.user_id)}}},[t("span",{staticClass:"icon"},[e._v("+")]),t("i",{staticClass:"el-icon-shopping-cart-2"}),t("span",{staticClass:"test1"},[e._v("选择")])])])})),0)]),[t("div",{staticClass:"paging"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[12,24,48,96],"page-size":e.per_page,layout:"total, prev, pager, next, sizes, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]],2),t("el-dialog",{attrs:{title:e.videoslist[e.videoslistindex]?.desc,visible:e.dialogVisible,width:"880px","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"eldialogVisble"},[t("div",{staticClass:"leftVis"},[t("video",{ref:"myVideo",attrs:{autoplay:"",controls:"",preload:"none"},on:{play:function(t){e.video_img=!0},pause:function(t){e.video_img=!1}}},[t("source",{attrs:{src:e.videoslist[e.videoslistindex]?.file,type:"video/mp4"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.video_img,expression:"!video_img"}],staticClass:"video_img",on:{click:e.videoplay}})]),t("div",{staticClass:"rigthlist"},[t("p",{staticClass:"rigthlist_p"},[e._v("作品案例")]),e._l(e.videoslist,(function(i,s){return t("p",{key:i.id,class:{videoslistcss:i.videoslistcss,falg:!0},on:{click:function(t){return e.SwitchVideo(e.videoslist,s)}}},[t("i",{staticClass:"el-icon-video-play",staticStyle:{"font-size":"16px"}}),e._v(" "+e._s(i.desc)+" ")])}))],2)])])],1)},a=[],l=(i(7658),i(8884)),r=i(1316),n=i(2524),o={name:"buyershow",data(){return{searchforval:"",genderValue:"",categoryValue:"",themeValue:"",categoryList:[],themeList:[],total:0,per_page:0,priceval:"",datalist:[],currentPage:1,pageSize:24,dialogVisible:!1,video_img:!0,videoslist:[],videoslistindex:0,requirementlist:[],addbtndom:this.$refs.addbtndom,prevIndexArr:[],indexArr:[],categoryidarr:[],isvideoslist:[]}},components:{},created(){this.requirementlist=this.RequirementLists},computed:{RequirementLists(){return r.Z.state.Index.RequirementList},Requiremenitems(){return r.Z.state.Index.Requiremenitem}},mounted(){document.getElementsByClassName("el-pagination__jump")[0].childNodes[0].nodeValue="跳转",this.handlerGetCategory("influencer"),this.handlerGetCategory("theme_area"),this.RenderingData(),window.addEventListener("beforeunload",(e=>this.beforeunloadHandler(e)))},beforeUpdate(){},methods:{handlerGetCategory(e){(0,l.n3)({type:e}).then((t=>{if(1===t.code)switch(e){case"influencer":this.categoryList=t.data;break;case"theme_area":this.themeList=t.data;default:break}})).catch((e=>{this.$message.error(e.msg)}))},handlerSearchList(e,t){switch(e){case"genderdata":this.genderValue=t;break;case"category_id":this.categoryValue=t;break;case"theme_id":this.themeValue=t;break;default:break}this.RenderingData()},RenderingData(){this.getdata(this.currentPage,this.pageSize,this.genderValue,this.categoryValue,this.themeValue,this.priceval,this.searchforval)},getdata(e,t,i,s,a,r,n){let o={keyword:n,genderdata:i,type:[],price:r,category_id:s,page:e,pageSize:t,order:"",orderType:"",theme_id:a};this.datalist=[],(0,l.eO)(o).then((e=>{if(1==e.code){this.total=e.data.total,this.per_page=e.data.per_page,this.datalist=e.data.data,this.currentPage=e.data.current_page;let t=[];this.datalist.forEach((e=>{if(t.push(e.category_ids),e.videos.length>=12){let t=e.videos.slice(0,10);this.isvideoslist.push(t)}else this.isvideoslist.push(e.videos)})),t.forEach((e=>{let t=e.map((e=>e.name)),i=t.join(" | ");this.categoryidarr.push(i)})),this.$nextTick((()=>{this.InvertList()}))}})).catch((e=>{this.$message.error(e.msg)}))},openVideos(e,t){this.dialogVisible=!0,this.videoslistindex=t,e.forEach((e=>e.videoslistcss=!1)),this.videoslist=e,this.videoslist[t].videoslistcss=!0},SwitchVideo(e,t){const i=this.$refs.myVideo;i.pause(),i.load(),i.play(),this.videoslistindex=t,e.forEach((e=>e.videoslistcss=!1)),this.videoslist=e,this.videoslist[t].videoslistcss=!0},addlist(e,t,i){this.requirementlist=this.RequirementLists;const s=event.clientX-20,a=event.clientY-20;this.$refs.addbtndom[t].classList.add("addlistbj"),this.$refs.addbtndom[t].querySelector(".test1").textContent="已选择",0!=e.istrue&&(this.requirementlist.push(e),r.Z.commit("Index/setRequirementList",this.requirementlist),this.createBall(s,a)),e.istrue=!1},SaveData(){let e=this.RequirementLists.map((e=>e.user_id)).join(","),t={influencer_id:e,type:1};""!==e&&(0,l.Nn)(t).then((e=>{console.log(e)}))},createBall(e,t){const i=document.createElement("ball");i.style.position="fixed",i.style.left=e+"px",i.style.top=t+"px",i.style.width="40px",i.style.height="40px",i.style.borderRadius="50%",i.style.backgroundColor="#d161f6",i.style.transition="left .6s linear, top .6s cubic-bezier(0.5, -0.5, 1, 1)",document.body.appendChild(i),setTimeout((()=>{const e=document.body.clientWidth-450,t=0;console.log(e),i.style.top=t+"px",i.style.left=e+"px"}),0),i.ontransitionend=function(){this.remove()}},InvertList(){let e=this;var t=e.$refs.addbtndom;e.RequirementLists.forEach((i=>{var s=e.datalist.findIndex((e=>e.id==i.user_id));-1!=s&&e.$nextTick((()=>{e.datalist[s].istrue=!1,t[s].classList.add("addlistbj"),t[s].querySelector(".test1").textContent="已选择"}))}))},SynchronizeList(e){var t=this.$refs.addbtndom;this.$nextTick((()=>{this.datalist[e].istrue=!0,t[e].classList.remove("addlistbj"),t[e].querySelector(".test1").textContent="选择"}))},gohomepage(e){window.open(window.location.origin+"/homepage:"+e)},handleSizeChange(e){this.pageSize=e,this.RenderingData()},handleCurrentChange(e){this.currentPage=e,this.RenderingData()},videoplay(){const e=this.$refs.myVideo;e.play(),this.video_img=!0},beforeunloadHandler(e){console.log("关闭窗口之后"),"/Requirement"!=n.Z.history._startLocation&&this.SaveData()}},destroyed(){window.removeEventListener("beforeunload",(e=>this.beforeunloadHandler(e)))},watch:{dialogVisible(e){if(0==e){const e=this.$refs.myVideo;e.pause(),e.load(),e.play()}},RequirementLists(e){console.log(e)},Requiremenitems(e){var t=this.datalist.findIndex((t=>t.id==e.user_id));this.SynchronizeList(t)}},beforeRouteLeave(e,t,i){"/Requirement"!=e.fullPath&&this.SaveData(),i()}},d=o,c=i(1001),u=(0,c.Z)(d,s,a,!1,null,"74e7bad1",null),h=u.exports},6741:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAWCAYAAAAmaHdCAAAAAXNSR0IArs4c6QAAA0RJREFUOE+VlE1oXFUUx3/nvXmZyTj9IA2tDVQ02SgqUolSURTddNEiCIWCqBtdiO5U3IoIgkTcqEihbgJqVMzCSl0oXRRRMAGViKmUivaDTE2TmUxm5n3fI2feG41oQC9cHm/m3N/7n/855wr/Y2moL6H0pS4zW4/Jf2XoVd1HyG9U+VL2y9FtIdrRowiT0pA3EXRroF7Qp+nwTr6TxypT8t72kBX9GOGYG2HGH5MXh4Et1d2N7zmdd7l7fSp7aGIiOLs9ZFHHcXzODqbj63gjuJ7L4nEk3OSedIF6PA7+FCqw0O25d1dD78PpKdn40xNVbZBzfx7yhH7H8RxIJqG6C/II0mVIxqCyB1wIkkLqtNUSOSaq6rPCa87jqbzOrtxB1gTOA/shuMloIB3wHEgOeQpxVux+hVOiF/VZlLe0BVkOXgO8BBBwo+VBB9jOwKUQZhCl0DdYhbOiV/UrUu4dBEVACDQAH7Cc7Hd7pqClAjvcTyC094AvDLJExm0Dt62ofaBSHjaALXuGkJVf7yaFil4KUYXT4lb0jOQ8aPIHEFMzlB8Dk0Ad6EC6Ahu/QyeBTQNZWqKfirusn0nOEbzyq71SvqVgqd25RVkIeRual+Bis/Am9vhEsl91HscjnjfwErqFgWqQHshdwEiZpv0XwrV1+OECRFapgI8k/kXn1HHcEwZi/E1wGWQZeJvgT4OYRyUgDGHxHHQiiKxaVd6Xzs8668PjQ0ilU5QvyUHasOMO8IJCSVQCNkqAxVB1s7K2pCd94UnflAgEHdiIIc7BtWHiZvDrJWAZ2v2iyRJrSgf+KCfl2qK+7cEzUkIqPViNiqCoCwf2Qm0vLPwE7d5fAOtsJ+DXeFlWv9YZlBcG6XjFXDRDSLRIq5eUbVI2WmpmKjiFoKat2mh8UNa+1efTkNdVwfMhMYjl7IqUEitjXiiwsTD3/YBureFO1avZq4cPV38UvaRj3RbzcY8Hogj6PbhiUyuFuQZIrfl8suqofjMy6mZvvMWfv/WArA/vlOIqUJXmEg+POF45f47b1xQyr9iVGste4D4Y35fOHTpYs9n+x/rbHXvihAY37OHR+m6eS3LO1HYyd98hFkRkOEX/eiX/AfRLun07NkmHAAAAAElFTkSuQmCC"}}]);